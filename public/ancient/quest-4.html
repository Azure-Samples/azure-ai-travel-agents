<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Polyglot Chambers - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-ancient">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/Azure-Samples/azure-ai-travel-agents" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Pyramid of Infinite Agents</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Polyglot Chambers</h1>
<hr>
<p>Within the Pyramid of Infinite Agents lies the Polyglot Chambers, a sacred space where the ancient architects encoded their wisdom in a multitude of languages. Here, explorers encounter tools crafted in Python, Java, and TypeScript, each harmonized by the Codex Orchestrator to achieve a singular purpose. The chamber resonates with the hum of these tools communicating through the Model Context Protocol, revealing the secrets of multi-language orchestration.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Sacred Tool Invocation</strong>: How do the tools handle requests and provide responses in their respective languages?</li>
<li>‚ö° <strong>Harmony of Diversity</strong>: What patterns enable seamless integration of tools written in Python, Java, and TypeScript within the MCP ecosystem?</li>
<li>üõ°Ô∏è <strong>Ritual Safeguards</strong>: How do the tools validate input and manage errors to ensure the integrity of their sacred functions?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix"><a href="https://github.com/Azure-Samples/azure-ai-travel-agents/blob/main/src/tools/itinerary-planning/src/mcp_server.py" target="_blank" rel="noopener noreferrer">src/tools/itinerary-planning/src/mcp_server.py</a>:</span> Python&#39;s Ritual of Itinerary Planning</h3>
<p>The Python-based itinerary planning tool uses the <code class="inline-code">FastMCP</code> framework to provide hotel and flight suggestions. It showcases robust input validation, dynamic data generation, and the use of modern Python features like type annotations and data classes. This tool exemplifies how Python&#39;s flexibility is harnessed in the MCP ecosystem.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">suggest_hotels</code>: Suggests hotels based on location and date, validating input and generating realistic mock data.</li>
<li><code class="inline-code">suggest_flights</code>: Suggests flights based on departure and return locations, with dynamic flight data generation and connection handling.</li>
<li><code class="inline-code">validate_iso_date</code>: Ensures input dates conform to ISO format and are valid.</li>
</ul>
<h3><span class="header-prefix"><a href="https://github.com/Azure-Samples/azure-ai-travel-agents/blob/main/src/tools/destination-recommendation/src/main/java/com/microsoft/mcp/sample/server/service/DestinationService.java" target="_blank" rel="noopener noreferrer">src/tools/destination-recommendation/src/main/java/com/microsoft/mcp/sample/server/service/DestinationService.java</a>:</span> Java&#39;s Oracle of Destination Insights</h3>
<p>This Java service provides destination recommendations, leveraging the Spring Boot framework. It emphasizes modularity and extensibility, with methods tailored to specific preferences like activity type, budget, and season.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">getDestinationsByActivity</code>: Recommends destinations based on activity type, validating input and returning hardcoded data.</li>
<li><code class="inline-code">getDestinationsByPreferences</code>: Handles multiple criteria for destination recommendations, validating and combining preferences.</li>
<li><code class="inline-code">getAllDestinations</code>: Returns a curated list of all available destinations.</li>
</ul>
<h3><span class="header-prefix"><a href="https://github.com/Azure-Samples/azure-ai-travel-agents/blob/main/src/tools/echo-ping/src/server.ts" target="_blank" rel="noopener noreferrer">src/tools/echo-ping/src/server.ts</a>:</span> TypeScript&#39;s Echoing Chamber</h3>
<p>The Echo MCP Server is a simple TypeScript-based tool that demonstrates the fundamentals of MCP integration. It handles requests, validates tools, and executes commands, serving as a template for more complex tools.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">setupServerRequestHandlers</code>: Configures handlers for listing and invoking tools.</li>
<li><a href="https://github.com/Azure-Samples/azure-ai-travel-agents/blob/main/src/tools/echo-ping/src/server.ts#L37" target="_blank" rel="noopener noreferrer"><code class="inline-code">handlePostRequest</code></a>: Manages incoming POST requests, connecting the server to the transport layer.</li>
<li><a href="https://github.com/Azure-Samples/azure-ai-travel-agents/blob/main/src/tools/echo-ping/src/server.ts#L137" target="_blank" rel="noopener noreferrer"><code class="inline-code">createRPCErrorResponse</code></a>: Generates structured error responses for invalid requests.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/Azure-Samples/azure-ai-travel-agents/blob/main/src/tools/itinerary-planning/src/mcp_server.py" target="_blank" rel="noopener noreferrer">src/tools/itinerary-planning/src/mcp_server.py</a></h3>
<pre><code class="language-python">@mcp.tool()
async def suggest_hotels(
    location: Annotated[str, Field(description=&quot;Location (city or area) to search for hotels&quot;)],
    check_in: Annotated[str, Field(description=&quot;Check-in date in ISO format (YYYY-MM-DD)&quot;)],
    check_out: Annotated[str, Field(description=&quot;Check-out date in ISO format (YYYY-MM-DD)&quot;)],
) -&gt; HotelSuggestions:
    check_in_date = validate_iso_date(check_in, &quot;check_in&quot;)
    check_out_date = validate_iso_date(check_out, &quot;check_out&quot;)
    if check_out_date &lt;= check_in_date:
        raise ValueError(&quot;check_out date must be after check_in date&quot;)
    hotels = [
        Hotel(
            name=f&quot;Hotel {i}&quot;,
            address=fake.street_address(),
            location=location,
            rating=random.uniform(3.0, 5.0),
            price_per_night=random.randint(100, 500),
            hotel_type=random.choice([&quot;Luxury&quot;, &quot;Budget&quot;]),
            amenities=random.sample([&quot;WiFi&quot;, &quot;Pool&quot;, &quot;Gym&quot;], 2),
            available_rooms=random.randint(1, 10),
        )
        for i in range(5)
    ]
    return HotelSuggestions(hotels=hotels)
</code></pre>
<ul>
<li>Validates ISO date inputs to ensure proper formatting and logical consistency.</li>
<li>Dynamically generates realistic hotel data, showcasing Python&#39;s data manipulation capabilities.</li>
<li>Uses <code class="inline-code">dataclasses</code> and type annotations to define structured data models.</li>
</ul>
<hr>
<h3><a href="https://github.com/Azure-Samples/azure-ai-travel-agents/blob/main/src/tools/destination-recommendation/src/main/java/com/microsoft/mcp/sample/server/service/DestinationService.java" target="_blank" rel="noopener noreferrer">src/tools/destination-recommendation/src/main/java/com/microsoft/mcp/sample/server/service/DestinationService.java</a></h3>
<pre><code class="language-java">@Tool(description = &quot;Get travel destination recommendations based on preferred activity type&quot;)
public String getDestinationsByActivity(String activityType) {
    String activity = activityType.toUpperCase();
    if (!isValidActivityType(activity)) {
        return &quot;Invalid activity type. Please use one of: BEACH, ADVENTURE, CULTURAL, RELAXATION, URBAN_EXPLORATION, NATURE, WINTER_SPORTS&quot;;
    }
    return &quot;Here are some destinations for activity type: &quot; + activity;
}

private boolean isValidActivityType(String activityType) {
    return activityType.equals(&quot;BEACH&quot;) || activityType.equals(&quot;ADVENTURE&quot;);
}
</code></pre>
<ul>
<li>Validates input to ensure only recognized activity types are processed.</li>
<li>Returns hardcoded recommendations, simplifying the logic for demonstration purposes.</li>
<li>Demonstrates the use of Java annotations to define tool metadata.</li>
</ul>
<hr>
<h3><a href="https://github.com/Azure-Samples/azure-ai-travel-agents/blob/main/src/tools/echo-ping/src/server.ts" target="_blank" rel="noopener noreferrer">src/tools/echo-ping/src/server.ts</a></h3>
<pre><code class="language-typescript">private setupServerRequestHandlers() {
  this.server.setRequestHandler(ListToolsRequestSchema, async (_request) =&gt; {
    return { tools: EchoTools };
  });
  this.server.setRequestHandler(CallToolRequestSchema, async (request) =&gt; {
    const tool = EchoTools.find((tool) =&gt; tool.name === request.params.name);
    if (!tool) {
      return this.createRPCErrorResponse(`Tool ${request.params.name} not found.`);
    }
    const result = await tool.execute(request.params.arguments);
    return { content: [{ type: &#39;text&#39;, text: `Result: ${result}` }] };
  });
}
</code></pre>
<ul>
<li>Configures handlers for listing and invoking tools, enabling dynamic tool discovery.</li>
<li>Validates tool existence before execution, ensuring robustness.</li>
<li>Demonstrates the use of TypeScript&#39;s async/await for handling asynchronous operations.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Pay attention to how each tool validates input to maintain the integrity of its operations.</li>
<li>Observe the use of annotations and metadata in Java and Python to define tool behavior.</li>
<li>Study the TypeScript server&#39;s structure for insights into MCP server design patterns.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries hidden within the Pyramid of Infinite Agents.</p>
<p>By the sacred flame of wisdom, thou hast unlocked the arcane tongues of The Polyglot Chambers, etching thy name among the seekers of ancient mastery‚Äîpress ever onward, for the stars yet hold treasures untold! ‚≠ê‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>